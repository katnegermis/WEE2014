% Web Engineering 2013

1 - WordPress
===============
a)
----
~~~~~
root/
    style.css
    index.php
    header.php
    footer.php
    single.php
    page.php
    sidebar.php
    front-page.php
    functions.php
    404.php
~~~~~

b)
----
The WordPress Loop is a loop in which data is fetched from a database and post data is displayed. The loop can be customized such that data is fetched based on some criterias other than the defaults. There can be multiple loops on a page.

The loop usually is a while loop on `have_posts()` calling `the_post()`, after which point functions such as `the_content()` and `the_title()` will output the content and title of a single post.

c)
----
The default of `WP_Query` is to order descending.
~~~~~
$args = array('posts_per_page' => 3, 'post_type' => 'event')
$q = WP_Query($args);
while (q->have_posts()): q->the_post();
    <!-- do stuff -->
endwhile;
~~~~~

d)
-------
`query_posts()` is a convenience function on the global variable `$wp_query`, which is an instance of `WP_Query`. The difference between using `query_posts()` and creating a `WP_Query` object 'manually' is that using `query_posts()` you will override/reuse the global object in `$wp_query`, while creating `WP_Query`'es manually will create new objects which do not interfere with each other; If `query_posts()` is used within another `$wp_query` loop, the effect is that the data in the object is discarded/overridden by the new query.

It seems to me to be less error prone to assign new instances of WP_Query to fresh variables, instead of trying to use the convenience functions available on `$wp_query`. This way it's a lot easier to reason about and see which function calls apply to which query.

e)
----
As written in d), `query_posts()` modifies the global variable `$wp_query`, and therefore is not safe to use in some cases. `query_posts()` should only be used for the main loop of a page.
This is not the case for `get_posts()` which doesn't modify global variables, and is always safe to use; `get_posts()` _returns_ a list of posts which the user can assign to a variable by a name of his choice.

f)
----
You might want to reset the loop data if you have nested loops, and want to use convenience functions like `the_title()`, `the_content()` etc. on both loops.

To reset the post data, one could call `wp_reset_postdata()` or `$variable->reset_postdata()`.

Example:
~~~~~
$loop1 = new WP_Query();
while ($loop1->have_posts()): $loop1->the_post();
    $loop2 = new WP_Query(array($post->some_attribute));
    while ($loop2->have_posts()): $loop2->the_post();
        the_content(); // Outputs content from $loop2.
    endwhile;
    $loop1->reset_postdata(); // Set global $post to data from $loop1.
    the_content(); // Outputs content from $loop1.

endwhile;
~~~~~

g)
----
Integrating custom post types into a theme ensures that users of that theme has the custom post type installed. Installing the custom post type as a plugin means that the users have to remember to install the plugin, as well as installing the theme.
A problem with integrating the custom post type in a theme is that the user has to use that theme in order to use the post type. Adding the post type as a plugin allows the user to use the custom post type with different themes.

A different approach would be to create the custom post type as a must-use plugin. Doing this means that the plugin _will always_ be activated, and cannot be (accidentally) deactivated in the admin menu. MU-plugins, however, can't be updated automatically by WPs plugin manager, and therefore requires users to update them manually.

h)
----
In order to create a custom post type, you need to add functions to be called at the right time by WP. Normally one would register a function to the WP-'init' hook, and call `register_post_type()` with appropriate arguments. This should be done in the `functions.php` file, where one would normally use the WP hooks.


2 - CSS
=========

3 - Web frameworks
====================

a)
----
One thing that many web frameworks have in common is that they require you to define classes which inherit from a specific model class, when defining your data models. This specific model class, among other things, implements generic methods for fetching and storing your data models in a database, often using an ORM, allowing you to save and retrieve data easily, in the same way for all kinds of data.
One (among many) advantages of inheriting from a generic model class is that you can update/modify the internals of all data models by changing only the generic model. This, for instance, makes it possible for the implementors of the framework to improve the internal code, without end users being required to make changes to their code.

b)
----
- URL routing
    - Match URLs to handler functions.
    - Separates URL routing from function definitions, allowing users to have all URL routing in one place.
- Templating engine
    - Processes templates and inserts data where applicable (template tags) before sending presentation to user.
    - Slick separation of logic and presentation.
- Database access via. ORM.
    - Basically an OO wrapper for building SQL statements.
    - Let users use database without writing SQL, abstract from actual database being used; lets you change the underlying database (almost) seamlessly.
- Scaffolding
    - Generate often used code and templates, e.g. CRUD.
    - Make it less time consuming for users to do repetitive tasks.

c)
----
Non-technical users can make use of web APIs by copy/pasting some javascript on to their site and adding some markup with a specific ID and/or class at the position where they want the component to reside, for instance letting users post comments in the bottom of a news paper article.

Examples of usage are:
- like/share buttons from almost all social media sites (facebook, google+, linkedin, etc.)
- Google analytics
- Add support for user comments on your site (facebook, disqus, etc.)

d)
----

#### i)
OAuth is being used to allow 3rd parties to use a user's services on behalf of that user without requiring the user to give his credentials to the 3rd party. This, for instance, makes it possible for a camera app to let its users automatically upload all pictures taken to their favorite social media site without the user having to worry about his credentials being stolen/abused by the creators of the camera app.


#### ii)

`Client` is the web application/native application.
`Resource owner` is the entity owning a resource, e.g. an end user.
`Authentication server` and `Resource server` are the servers which provide a service to the `Client`, i.e. host the resources to be used.

1. The client requests authorization to request resources on behalf of the resource owner.
2. The resource owner authenticates with the authentication server and authorizes the client to request resources on his behalf. The resource owner receives an authorization code.
3. The resource owner passes the authorization code to the client.
4. The client exchanges the authorization code for an access code at the authentication server.
5. Using the access code, the client can now request resources on behalf of the resource owner. The resource owner may at any point in time withdraw the authorization (at the authorization server) which was given to the client, making the client's access code invalid.



4 - Random stuff
==================
